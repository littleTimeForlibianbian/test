<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=width-device,initial-scale=1.0">
    <title>首页</title>
    <link rel="stylesheet" href="css/style.css"/>
    <link rel="stylesheet" href="css/bootstrap.css"/>

<body>
<div class="headernav">
</div>
<div class="ES-banner">
    <div class="ES-banner-image"></div>
</div>
<div class="container contentpage">
    <ul id="tab">
    </ul>
</div>
<div class="more text-center"><a href="" class="btn-more" onclick="show()">查看更多</a></div>
<div class="footer"></div>
</body>

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script src="js/base.js"></script>
<script>
    //禁止点击右键
    $(document).ready(function () {
        $("#tab img").bind("contextmenu", function (e) {
            return false;
        });
    });
    $(".footer").load("footer.html")
    $(".headernav").load("header.html")
    var pages = 1;//页数
    var pagesNum = 10;//每页显示的条数
    $(function () {
        show();
        var urlinfourl = getQueryVariable("a");
        if (urlinfourl == 1) {
            $("#myworldcon").hide()
        } else {
            $("#myworldcon").show()
        }
    })

    //搜索功能
    function searchlabel() {
        var worklabelmore = $("#worklabelmore").val();
        alert(worklabelmore);
        $.ajax({
            url: "",//接口地址
            data: {//接口里必传的参数
                xxxxx: worklabelmore
            },
            type: "post",
            dataType: "json",
            success: function (data) {
                var dataObj = data.xxxxx;//json集合的名字dataObj[i].url
                imgCon = "";
                for (var i = 0; i < dataObj.length; i++) {
                    imgCon += "<li>" +
                        "<a href=" + dataObj[i].xxxx + ">" +
                        "<img class='imgpicture' src=" + dataObj[i].xxxx + ">" +
                        "</a>" +
                        "<div class='labelhome'><span>" + dataObj[i].xxxx + "</span></div>" +
                        "</li>";
                }
                $('#tab').append(imgCon);
            },
            error: function (jqXHR, textStatus, errorThrown) {
            }
        });
    }

    //图片展示
    function show() {
        $.ajax({
                url: basePath + "/public/user/workList",//接口地址
                data: {//接口里必传的参数
                    "pageNo": pages,
                    "pageSize": pagesNum
                },
                type: "post",
                dataType: "json",
                success: function (data) {
                    var dataObj = data;//json集合的名字dataObj[i].url
                    console.log(dataObj)
                    imgCon = "";
                    var imgCon;
                    var isLogin = localStorage.getItem("userId");
                    if (dataObj.length > 0) {
                        for (var i = 0; i < dataObj.length; i++) {
                            var imageList = dataObj[i].imageList;
                            var tagList = dataObj[i].dicts;
                            imgCon += "<li>";
                            if (isLogin == null || isLogin == "undefined" || isLogin.length == 0) {
                                imgCon += "<a href='nologindrawer.html?id=" + dataObj[i].id + "'>" +
                                    "<img class='imgpicture' src=" + dataObj[i].imageList[0].url + ">" +
                                    "</a>";
                            } else {
                                imgCon += "<a href='drawerdetails.html?id=" + dataObj[i].id + "'>" +
                                    "<img class='imgpicture' src=" + dataObj[i].imageList[0].url + ">" +
                                    "</a>";
                            }

                            imgCon += "<div class='labelhome'>";
                            for (var j = 0; j < tagList.length; j++) {
                                imgCon += "<span>" + tagList[j].dictValue + "</span>"
                            }
                            imgCon += "</div></li>";
                        }
                    } else {
                        console.log("接口异常")
                        console.log(data)
                    }

                    $('#tab').append(imgCon);


                },
                error: function (jqXHR, textStatus, errorThrown) {
                }
            }
        )
        ;
    }
</script>
</html>
